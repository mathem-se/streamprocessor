# This contract is currently paused
# as is built using a key-value map for nested fields
# Ticket for supporting key-value map fields:
# https://mathem.atlassian.net/browse/DATA-2758?atlOrigin=eyJpIjoiNjM1ODViOTZmM2FjNDNmY2JhYmI3NGIyOGJjZjI0ZTUiLCJwIjoiaiJ9
version: "1"
entity: ecom-cart-service-CartEventTopic
dataset: dynamodb
ownership:
  squad: ONME - Onboarding and Membership
  repository: https://github.com/mathem-se/ecom-cart-service
  slack_channel: "#squad-onme"
  product_area: Online Shopping Experience
schema:
  columns:
  - name: Id
    mode: NULLABLE
    type: STRING
  - name: Revision
    mode: NULLABLE
    type: INTEGER
  - name: StoreId
    mode: NULLABLE
    type: STRING
  - name: MemberId
    description: (Indirect PII)
    mode: NULLABLE
    type: STRING
    tags:
    - identity_member_id
  - name: MemberType
    mode: NULLABLE
    type: STRING
  - name: Created
    mode: NULLABLE
    type: TIMESTAMP
  - name: Modified
    mode: NULLABLE
    type: TIMESTAMP
  - name: Expires
    mode: NULLABLE
    type: TIMESTAMP
  - name: Products
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        mode: NULLABLE
        type: STRING
      - name: Quantity
        mode: NULLABLE
        type: FLOAT
      - name: Name
        mode: NULLABLE
        type: STRING
      - name: Added
        mode: NULLABLE
        type: TIMESTAMP
      - name: Category
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Id
          mode: NULLABLE
          type: STRING
        - name: Name
          mode: NULLABLE
          type: STRING
      - name: Price
        mode: NULLABLE
        type: FLOAT
      - name: VatRate
        mode: NULLABLE
        type: FLOAT
      - name: Url
        mode: NULLABLE
        type: STRING
      - name: ImageUrl
        mode: NULLABLE
        type: STRING
      - name: EanCode
        mode: NULLABLE
        type: STRING
      - name: ExternalSupplierCode
        mode: NULLABLE
        type: STRING
      - name: ExternalProductCode
        mode: NULLABLE
        type: STRING
      - name: Department
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Id
          mode: NULLABLE
          type: STRING
        - name: Name
          mode: NULLABLE
          type: STRING
      - name: Brand
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Id
          mode: NULLABLE
          type: STRING
        - name: Name
          mode: NULLABLE
          type: STRING
      - name: RecycleFee
        mode: NULLABLE
        type: FLOAT
      - name: Attributes
        mode: REPEATED
        type: STRING
      - name: Discount
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Id
          mode: NULLABLE
          type: STRING
        - name: DiscountPrice
          mode: NULLABLE
          type: RECORD
          fields:
          - name: Value
            mode: NULLABLE
            type: FLOAT
          - name: DiscountPriceType
            mode: NULLABLE
            type: INTEGER
        - name: Limits
          mode: REPEATED
          type: RECORD
          fields:
          - name: Group
            mode: NULLABLE
            type: STRING
          - name: Property
            mode: NULLABLE
            type: STRING
          - name: Operator
            mode: NULLABLE
            type: STRING
          - name: Value
            mode: NULLABLE
            type: STRING
        - name: Conditions
          mode: REPEATED
          type: RECORD
          fields:
          - name: Group
            mode: NULLABLE
            type: STRING
          - name: Property
            mode: NULLABLE
            type: STRING
          - name: Operator
            mode: NULLABLE
            type: STRING
          - name: Value
            mode: NULLABLE
            type: STRING
        - name: ValidFrom
          mode: NULLABLE
          type: TIMESTAMP
        - name: ValidUntil
          mode: NULLABLE
          type: TIMESTAMP
        - name: CanUseProductOfferDiscount
          mode: NULLABLE
          type: BOOLEAN
      - name: Delivery
        mode: NULLABLE
        type: RECORD
        fields:
        - name: IsPickingCostIncluded
          mode: NULLABLE
          type: BOOLEAN
        - name: IsDeliveryCostIncluded
          mode: NULLABLE
          type: BOOLEAN
        - name: IsSubscriptionProduct
          mode: NULLABLE
          type: BOOLEAN
        - name: CancelDaysBefore
          mode: NULLABLE
          type: INTEGER
        - name: MinimumRequiredDeliveryDays
          mode: NULLABLE
          type: INTEGER
        - name: AdvanceDeliveryMinimumOrder
          mode: NULLABLE
          type: INTEGER
        - name: IsAdultProduct
          mode: NULLABLE
          type: BOOLEAN
        - name: IsWine
          mode: NULLABLE
          type: BOOLEAN
        - name: DeliverableWeekdays
          mode: REPEATED
          type: STRING
        - name: DeliveryRestrictions
          mode: REPEATED
          type: STRING
      - name: Availability
        mode: NULLABLE
        type: STRING
      - name: CategoryAncestry
        mode: REPEATED
        type: RECORD
        fields:
        - name: Id
          mode: NULLABLE
          type: STRING
        - name: Name
          mode: NULLABLE
          type: STRING
      - name: Subtitle
        mode: NULLABLE
        type: STRING
      - name: ExternalUrl
        mode: NULLABLE
        type: STRING
      - name: SoldBy
        mode: NULLABLE
        type: STRING
      - name: ShowSoldBy
        mode: NULLABLE
        type: BOOLEAN
      - name: PharmacyInformation
        description: PharmacyInformation.
        mode: NULLABLE
        type: RECORD
        fields:
        - name: ArticleNumber
          description: ArticleNumber. (Sensitive)
          mode: NULLABLE
          type: STRING
          tags:
          - pii_member_ssn
        - name: ActiveSubstance
          description: ActiveSubstance. (Sensitive)
          mode: NULLABLE
          type: STRING
          tags:
          - pii_member_ssn
        - name: ItemType
          description: ItemType. (Sensitive)
          mode: NULLABLE
          type: STRING
          tags:
          - pii_member_ssn
        - name: SalesLimit
          description: SalesLimit. (Sensitive)
          mode: NULLABLE
          type: INTEGER
          tags:
          - pii_member_ssn
        - name: SalesRestrictionType
          description: SalesRestrictionType. (Sensitive)
          mode: NULLABLE
          type: STRING
          tags:
          - pii_member_ssn
        - name: VendingType
          description: VendingType. (Sensitive)
          mode: NULLABLE
          type: STRING
          tags:
          - pii_member_ssn
      - name: HasPharmacyDiff
        mode: NULLABLE
        type: BOOLEAN
      - name: Disclaimer
        description: Disclaimer.
        mode: NULLABLE
        type: STRING
      - name: Supplier
        description: Supplier.
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Id
          description: Id.
          mode: NULLABLE
          type: STRING
        - name: Name
          description: Name.
          mode: NULLABLE
          type: STRING
  - name: OriginalCartId
    mode: NULLABLE
    type: STRING
  - name: ChangingOrderId
    description: ChangingOrderId. (Indirect PII)
    mode: NULLABLE
    type: STRING
    tags:
    - pii_member_id
  - name: OrderMessage
    mode: NULLABLE
    type: STRING
  - name: SocialSecurityNo
    description: (Direct PII)
    mode: NULLABLE
    type: STRING
    tags:
    - identity_member_ssn
  - name: TotalPaidAmount
    mode: NULLABLE
    type: FLOAT
  - name: CartStatus
    mode: NULLABLE
    type: STRING
  - name: Payment
    mode: NULLABLE
    type: RECORD
    fields:
    - name: PaymentType
      mode: NULLABLE
      type: STRING
    - name: OrderReference
      description: (Indirect PII)
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_id
  - name: DeliveryTime
    mode: NULLABLE
    type: RECORD
    fields:
    - name: Id
      mode: NULLABLE
      type: STRING
    - name: TruckRouteId
      description: (Indirect PII)
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_id
    - name: Added
      mode: NULLABLE
      type: TIMESTAMP
    - name: TimeId
      mode: NULLABLE
      type: STRING
    - name: StartDate
      mode: NULLABLE
      type: TIMESTAMP
    - name: StopDate
      mode: NULLABLE
      type: TIMESTAMP
    - name: DeliveryCost
      mode: NULLABLE
      type: FLOAT
    - name: ExtraDeliveryCost
      mode: NULLABLE
      type: FLOAT
    - name: InHomeDelivery
      mode: NULLABLE
      type: BOOLEAN
    - name: DeliveryTimeChangedByAdmin
      mode: NULLABLE
      type: BOOLEAN
    - name: DeliveryRestrictions
      mode: REPEATED
      type: STRING
    - name: ClosingDate
      mode: NULLABLE
      type: TIMESTAMP
    - name: ClosingTime
      mode: NULLABLE
      type: TIME
    - name: StoreId
      description: StoreId
      mode: NULLABLE
      type: STRING
    - name: DeliveryFeeLimits
      description: Delivery fee limits
      mode: REPEATED
      type: RECORD
      fields:
      - name: Cost
        description: Cost.
        mode: NULLABLE
        type: FLOAT
      - name: Limit
        description: Limit.
        mode: NULLABLE
        type: FLOAT
  - name: Address
    mode: NULLABLE
    type: RECORD
    fields:
    - name: Id
      description: (Indirect PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_id
    - name: LegacyAddressId
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AddressType
      mode: NULLABLE
      type: STRING
    - name: MemberId
      description: (Indirect PII).
      mode: NULLABLE
      type: STRING
      tags:
      - identity_member_id
    - name: CompanyName
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: FirstName
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: LastName
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: PhoneMobile
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: PhoneHome
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AlternativePhoneHome
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AlternativePhoneMobile
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AddressRow1
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AddressRow2
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: DoorCode
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: AddressInfo
      description: (Direct PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_ssn
    - name: PostalCode
      mode: NULLABLE
      type: STRING
    - name: City
      mode: NULLABLE
      type: STRING
    - name: Latitude
      description: (Direct PII).
      mode: NULLABLE
      type: FLOAT
      tags:
      - pii_member_ssn
    - name: Longitude
      description: (Direct PII).
      mode: NULLABLE
      type: FLOAT
      tags:
      - pii_member_ssn
    - name: TruckRouteId
      description: (Indirect PII).
      mode: NULLABLE
      type: STRING
      tags:
      - pii_member_id
    - name: InHomeAvailable
      mode: NULLABLE
      type: BOOLEAN
    - name: CreationDate
      mode: NULLABLE
      type: STRING
    - name: LastModifiedDate
      mode: NULLABLE
      type: STRING
    - name: RemovedDate
      mode: NULLABLE
      type: STRING
  - name: RecurringOrder
    mode: NULLABLE
    type: RECORD
    fields:
    - name: Status
      mode: NULLABLE
      type: INTEGER
    - name: Interval
      mode: NULLABLE
      type: INTEGER
  - name: Recipes
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        mode: NULLABLE
        type: STRING
      - name: RecipeId
        mode: NULLABLE
        type: STRING
      - name: ExternalRecipeId
        mode: NULLABLE
        type: STRING
      - name: Name
        mode: NULLABLE
        type: STRING
      - name: Added
        mode: NULLABLE
        type: TIMESTAMP
      - name: Url
        mode: NULLABLE
        type: STRING
      - name: ImageUrl
        mode: NULLABLE
        type: STRING
      - name: Portions
        mode: NULLABLE
        type: INTEGER
      - name: RecipeProducts
        mode: REPEATED
        type: RECORD
        fields:
        - name: ProductId
          mode: NULLABLE
          type: STRING
        - name: Quantity
          mode: NULLABLE
          type: FLOAT
        - name: Unit
          mode: NULLABLE
          type: STRING
  - name: Discounts
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Code
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Text
        mode: NULLABLE
        type: STRING
      - name: PercentageDeliveryFee
        mode: NULLABLE
        type: FLOAT
      - name: Percentage
        mode: NULLABLE
        type: FLOAT
      - name: Value
        mode: NULLABLE
        type: FLOAT
      - name: AmountLimit
        mode: NULLABLE
        type: FLOAT
      - name: ProductId
        description: Product Id
        mode: NULLABLE
        type: STRING
  - name: Fees
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Amount
        mode: NULLABLE
        type: FLOAT
      - name: VatRate
        mode: NULLABLE
        type: FLOAT
  - name: Bonuses
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Code
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Amount
        mode: NULLABLE
        type: FLOAT
  - name: GiftVouchers
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Code
        description: (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: Text
        mode: NULLABLE
        type: STRING
      - name: Comments
        description: (Direct PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_ssn
      - name: Value
        mode: NULLABLE
        type: FLOAT
      - name: ValidFrom
        mode: NULLABLE
        type: TIMESTAMP
      - name: ValidUntil
        mode: NULLABLE
        type: TIMESTAMP
      - name: AlreadyUsed
        mode: NULLABLE
        type: BOOLEAN
  - name: Credit
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: FLOAT
  - name: OriginalProducts
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: Id
        mode: NULLABLE
        type: STRING
      - name: Quantity
        mode: NULLABLE
        type: FLOAT
      - name: Name
        mode: NULLABLE
        type: STRING
      - name: Price
        mode: NULLABLE
        type: FLOAT
      - name: IsWine
        mode: NULLABLE
        type: BOOLEAN
      - name: ProductDiscountPrice
        description: ProductDiscountPrice.
        mode: NULLABLE
        type: FLOAT
  - name: OriginalDeliveryDate
    mode: NULLABLE
    type: TIMESTAMP
  - name: LockPhoneNumber
    mode: NULLABLE
    type: STRING
  - name: SubscriptionId
    mode: NULLABLE
    type: STRING
  - name: UnavailableSubscriptionProducts
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: RECORD
      fields:
      - name: ProductId
        mode: NULLABLE
        type: STRING
      - name: Name
        mode: NULLABLE
        type: STRING
      - name: Quantity
        mode: NULLABLE
        type: INTEGER
      - name: ReasonCode
        mode: NULLABLE
        type: STRING
  - name: MemberGroupFees
    mode: NULLABLE
    type: RECORD
    fields:
    - name: PickingCost
      mode: NULLABLE
      type: STRING
    - name: DeliveryFee
      mode: NULLABLE
      type: RECORD
      fields:
      - name: UseDeliveryFee
        mode: NULLABLE
        type: BOOLEAN
      - name: Under
        mode: NULLABLE
        type: INTEGER
      - name: Between
        mode: NULLABLE
        type: INTEGER
      - name: Over
        mode: NULLABLE
        type: INTEGER
      - name: LimitUnder
        mode: NULLABLE
        type: INTEGER
      - name: LimitOver
        mode: NULLABLE
        type: INTEGER
      - name: DeliveryFeeLimits
        description: Delivery fee limits
        mode: REPEATED
        type: RECORD
        fields:
        - name: Cost
          description: Cost.
          mode: NULLABLE
          type: FLOAT
        - name: Limit
          description: Limit.
          mode: NULLABLE
          type: FLOAT
    - name: InvoiceCost
      mode: NULLABLE
      type: FLOAT
  - name: PartitionTimestamp
    description: Timestamp used as partition column. A COALESCE(ModifiedOn,CreatedOn)
    mode: NULLABLE
    type: TIMESTAMP
  - name: NumberOfConfirmedOrderLines
    mode: NULLABLE
    type: INTEGER
  - name: DeliveryTimeStatus
    mode: NULLABLE
    type: RECORD
    fields:
    - name: Status
      mode: NULLABLE
      type: STRING
    - name: Modified
      mode: NULLABLE
      type: TIMESTAMP
    - name: ExpiresAt
      mode: NULLABLE
      type: TIMESTAMP
  - name: _ATTRIBUTES
    description: Message meta-data.
    mode: REPEATED
    type: RECORD
    fields:
    - name: key
      mode: NULLABLE
      type: STRING
    - name: value
      mode: NULLABLE
      type: STRING
  - name: Benefits
    mode: REPEATED
    type: RECORD
    fields:
    - name: MemberId
      description: Member ID. (Indirect PII)
      mode: NULLABLE
      type: STRING
      tags:
      - identity_member_id
    - name: BenefitType
      description: Benefit Type.
      mode: NULLABLE
      type: STRING
    - name: Benefits
      mode: REPEATED
      type: RECORD
      fields:
      - name: FromOrderId
        description: From Order ID (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
      - name: NewOrderAmountRequired
        description: New Order Amount Required.
        mode: NULLABLE
        type: FLOAT
      - name: OrderDeliveryDate
        description: Order Delivery Date.
        mode: NULLABLE
        type: STRING
      - name: Status
        description: Status.
        mode: NULLABLE
        type: RECORD
        fields:
        - name: Applicable
          description: Applicable.
          mode: NULLABLE
          type: BOOLEAN
        - name: Reason
          description: Reason.
          mode: NULLABLE
          type: STRING
      - name: ValidFrom
        description: Valid From.
        mode: NULLABLE
        type: STRING
      - name: ValidUntil
        description: Valid Until.
        mode: NULLABLE
        type: STRING
      - name: Applied
        description: Applied.
        mode: NULLABLE
        type: BOOLEAN
      - name: UsedOnOrder
        description: UsedOnOrder. (Indirect PII)
        mode: NULLABLE
        type: STRING
        tags:
        - pii_member_id
  - name: ProductRestrictions
    description: Product Restrictions
    mode: REPEATED
    type: RECORD
    fields:
    - name: ProductId
      description: ProductId.
      mode: NULLABLE
      type: STRING
    - name: Description
      description: Description.
      mode: NULLABLE
      type: STRING
    - name: MaxQuantity
      description: MaxQuantity. Deprecated, replaced by MaxTotalQuantity.
      mode: NULLABLE
      type: INTEGER
    - name: Quantity
      description: Quantity.
      mode: NULLABLE
      type: INTEGER
    - name: Modified
      description: Modified.
      mode: NULLABLE
      type: STRING
    - name: RestrictionId
      description: RestrictionId.
      mode: NULLABLE
      type: STRING
    - name: MaxTotalQuantity
      description: MaxTotalQuantity. Replaces MaxQuantity.
      mode: NULLABLE
      type: INTEGER
    - name: CurrentTotalQuantity
      description: CurrentTotalQuantity.
      mode: NULLABLE
      type: INTEGER
